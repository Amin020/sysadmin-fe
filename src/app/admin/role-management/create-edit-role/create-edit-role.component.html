<div>
  <mdb-card>
    <mdb-card-body>
      <form (ngSubmit)="updateRole()">
        <mdb-card-title>
          <h6 class="text-uppercase mb-0 mr-auto">
            <ng-container *ngIf="!roleId; else updateHeaderTemp">
              {{ 'create-edit-role.addNewRole' | translate }}
            </ng-container>
            <ng-template #updateHeaderTemp>
              {{ 'create-edit-role.editRole' | translate }}: <strong> {{ roleObj.code }} </strong>
            </ng-template>
          </h6>
        </mdb-card-title>
        <div class="d-flex justify-content-left p-2 row" *ngIf='roleObj'>

          <!-- <div class="md-form m-3 ml-0 col-md-3">
            <input #roleCodeInput mdbInput type="text" name="code" [(ngModel)]="roleObj.code" class="form-control">
            <label for="code" class="active" (click)="roleCodeInput.focus()">Code</label>
          </div> -->

          <div class="md-form m-3 ml-0 col-md-4">
            <input #roleDescInput mdbInput type="text" name="desc" [(ngModel)]="roleObj.desc" class="form-control">
            <label for="description" class="active" (click)="roleDescInput.focus()">
              {{ 'create-edit-role.description' | translate }}
            </label>
          </div>

          <div class="md-form m-3 ml-0 col-md-3" *ngIf='roleId'>
            <mdb-select [options]="roleStatusList" [(ngModel)]="roleObj.status" name=" roleStatus"
              [placeholder]="'create-edit-role.selectRole' | translate"></mdb-select>
            <label for="roleStatus" class="active">
              {{ 'create-edit-role.status' | translate }}
            </label>
          </div>

        </div>
        <div class="d-flex justify-content-right">
          <button (click)="backToPreviousPage()" mdbBtn class="grey btn-md">
            {{ 'common.cancel' | translate }}
          </button>
          <button type="submit" mdbBtn color="primary" class="btn-md">
            {{ 'common.save' | translate }} <span *ngIf="saveLoading">...</span>
          </button>
        </div>
      </form>
    </mdb-card-body>
  </mdb-card>

  <div class="card card-cascade narrower p-4" *ngIf="allApps.length > 0">
    <div class="d-flex justify-content-between">
      <div>
        <h4 class="mb-4">
          {{ 'create-edit-role.authorizationList' | translate }}
        </h4>
      </div>
      <div>
        <div class="d-flex justify-content-end">
          <mdb-select *ngIf="allApps.length > 0" [options]="allApps"
            [placeholder]="'create-edit-role.addNewApp' | translate" [(ngModel)]="appToAdd">
          </mdb-select>
          <a mdbBtn size="sm" color="primary" rounded="true" mdbWavesEffect (click)='addBundleApp()'
            style="min-width: 100px">
            <mdb-icon fas icon="plus"></mdb-icon>
            {{ 'common.add' | translate }}
          </a>
        </div>
      </div>
    </div>

    <h4 class="text-center m-5 grey-text" *ngIf="SelectedApps.length == 0">
      {{ 'common.noAppsFound' | translate }}
    </h4>

    <table mdbTable>
      <thead>
        <tr>
          <th *ngFor="let head of headElements" scope="col">
            {{ head }}
          </th>
        </tr>
      </thead>
      <tbody>
        <tr mdbTableCol *ngFor="let app of SelectedApps; let i=index ">
          <th scope="row" class="text-truncate" style="max-width: 300px;">
            {{app.sysAppNode.shortName}}</th>
          <td>
            <mdb-checkbox name="read" valu="false" [(ngModel)]="app.read"></mdb-checkbox>
          </td>
          <td>
            <mdb-checkbox name="write" valu="false" [(ngModel)]="app.write"></mdb-checkbox>
          </td>
          <td>
            <mdb-checkbox name="delete" valu="false" [(ngModel)]="app.delete"></mdb-checkbox>
          </td>
          <td>
            <mdb-checkbox name="hide" valu="false" [(ngModel)]="app.hide"></mdb-checkbox>
          </td>
          <td>
            <mdb-select [options]="roleStatusList" [(ngModel)]="app.status" name=" roleStatus"
              [placeholder]="'create-edit-role.selectRole' | translate"></mdb-select>
          </td>
          <td>
            <a mdbBtn floating="true" size="sm" color="danger" mdbWavesEffect title="Delete"
              (click)="deleteApp(app.id,i)">
              <mdb-icon fas icon="trash"></mdb-icon>
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>